<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EcoS Prompt-Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 font-sans">
  <div class="max-w-3xl mx-auto p-6">

    <h1 class="text-3xl font-bold mb-4">EcoS Prompt-Generator</h1>
    <p class="mb-6 text-sm text-gray-700">
      <strong>Instructions:</strong><br>
      Select the current phase of your research project, fill in the fields, then click “Submit” to generate your prompt.<br>
      You can then copy the prompt and paste it into ChatGPT, Claude, Gemini, etc.
    </p>

    <div class="space-y-6">
      <div>
        <label for="modeSelect" class="block font-medium mb-1">Choose what to generate:</label>
        <select id="modeSelect"
                class="w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="rq">1. Topic &amp; Research Question</option>
          <option value="relevance">2. Relevance Table</option>
          <option value="lit-structure">3. Literature Review Structure</option>
          <option value="literature-review">4. Literature Review</option>
          <option value="analytical-framework">5. Analytical Framework</option>
        </select>
      </div>

      <div id="rq-section" class="space-y-4">
        <div>
          <label for="title" class="block font-medium">Title of the Thesis</label>
          <input type="text" id="title" maxlength="300" required
                 class="w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
          <div id="title-count" class="text-right text-xs text-gray-500">0 / 300</div>
        </div>
        <div>
          <label for="research-question" class="block font-medium">Research Question</label>
          <input type="text" id="research-question" maxlength="300" required
                 class="w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
          <div id="rq-count" class="text-right text-xs text-gray-500">0 / 300</div>
        </div>
      </div>

      <div id="relevance-section" class="space-y-4 hidden">
        <div>
          <label for="relevance-rq" class="block font-medium">Research Question</label>
          <input type="text" id="relevance-rq" maxlength="300" required
                 class="w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
          <div id="relevance-rq-count" class="text-right text-xs text-gray-500">0 / 300</div>
        </div>
        <div>
          <label for="relevance" class="block font-medium">Relevance Section</label>
          <textarea id="relevance" rows="6" maxlength="50000" required
                    class="w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
          <div id="relevance-count" class="text-right text-xs text-gray-500">0 / 50000</div>
        </div>
      </div>

      <!-- UPDATED: Literature Review Structure -->
      <div id="lit-structure-section" class="space-y-4 hidden">
        <div>
          <label for="lit-structure-rq" class="block font-medium">Research Question</label>
          <input type="text" id="lit-structure-rq" maxlength="300" required
                 class="w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"/>
          <div id="lit-structure-rq-count" class="text-right text-xs text-gray-500">0 / 300</div>
        </div>
        <div>
          <label for="lit-structure" class="block font-medium">Literature Review Structure</label>
          <textarea id="lit-structure" rows="4" maxlength="50000" required
                    class="w-full p-3 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
          <div id="lit-structure-count" class="text-right text-xs text-gray-500">0 / 50000</div>
        </div>
      </div>

      <div id="literature-review-section" class="space-y-4 hidden">
        <!-- ... unchanged ... -->
      </div>

      <div id="analytical-framework-section" class="space-y-4 hidden">
        <!-- ... unchanged ... -->
      </div>

      <button id="submit-btn"
              class="w-full bg-blue-600 text-white px-5 py-2 rounded-xl shadow hover:bg-blue-700 transition">
        Submit
      </button>
    </div>

    <div id="result" class="mt-8 whitespace-pre-wrap bg-white border border-gray-300 rounded-xl p-4 text-sm"></div>
    <button id="copy-btn"
            class="mt-4 w-full bg-green-600 text-white px-5 py-2 rounded-xl shadow hover:bg-green-700 transition hidden">
      Copy to Clipboard
    </button>

  </div>

  <script>
    // Cache
    const resultDiv = document.getElementById('result');
    const copyBtn   = document.getElementById('copy-btn');
    const modeSelect = document.getElementById('modeSelect');

    // Sections
    const sections = {
      rq: document.getElementById('rq-section'),
      relevance: document.getElementById('relevance-section'),
      'lit-structure': document.getElementById('lit-structure-section'),
      'literature-review': document.getElementById('literature-review-section'),
      'analytical-framework': document.getElementById('analytical-framework-section')
    };

    function updateSections() {
      Object.entries(sections).forEach(([key, el]) => {
        el.classList.toggle('hidden', modeSelect.value !== key);
      });
      copyBtn.classList.add('hidden');
      resultDiv.textContent = '';
    }
    modeSelect.addEventListener('change', updateSections);
    updateSections();

    function setupCounter(id, countId) {
      const el = document.getElementById(id), cnt = document.getElementById(countId);
      el.addEventListener('input', () => cnt.textContent = `${el.value.length} / ${el.maxLength}`);
    }
    [
      ['title','title-count'], ['research-question','rq-count'],
      ['relevance-rq','relevance-rq-count'], ['relevance','relevance-count'],
      ['lit-structure-rq','lit-structure-rq-count'], ['lit-structure','lit-structure-count'],
      // … other counters …
    ].forEach(args => setupCounter(...args));

    document.getElementById('submit-btn').addEventListener('click', () => {
      let prompt = '';
      const mode = modeSelect.value;

      if (mode === 'rq') {
        const t = document.getElementById('title').value.trim();
        const q = document.getElementById('research-question').value.trim();
        prompt = `EcoS Prompt-Generator: Research Question\n\nTitle: "${t}"\nResearch Question: "${q}"`;
      }
      else if (mode === 'relevance') {
        const q = document.getElementById('relevance-rq').value.trim();
        const r = document.getElementById('relevance').value.trim();
        prompt = `EcoS Prompt-Generator: Relevance\n\nResearch Question: "${q}"\n\nRelevance Section:\n${r}`;
      }
      else if (mode === 'lit-structure') {
        const q = document.getElementById('lit-structure-rq').value.trim();
        const s = document.getElementById('lit-structure').value.trim();
        prompt = `<PromptTemplate>
    <!-- ===== SYSTEM MESSAGE ===== -->
    <System>
        You are an expert academic advisor specializing in Literature Review (LR) structure.
        Your task is to evaluate a student’s LR **draft** and give detailed, constructive feedback **only** to the student, so they can revise before submitting to the professor.
        The professor will make the final judgement, so phrase all feedback as advisory, not definitive.
        Focus on whether the LR offers a solid theoretical foundation (“how”) for answering the Research Question (RQ) and **avoid** assessing data, results, or case-specific content (“what”).
        Base your evaluation on the professor’s recurring guidelines:
        1. Align tightly with the RQ; do not try to answer the RQ in the LR.
        2. Organize thematically around concepts/approaches, not chronologically or by author.
        3. Exclude specific case studies (countries, firms, events) from the LR; they belong in the empirical section.
        4. Synthesize and critically evaluate literature; do not merely summarise sources.
        5. End the LR with a clear analytical framework (AF) that can later be applied to the case.
    </System>

    <!-- ===== USER-FACING INSTRUCTIONS ===== -->
    <UserPrompt>
        You are about to read a student’s Research Question and Literature Review **structure**.
        Analyse the LR against the five dimensions below.
        For each dimension give **(a) strengths**, **(b) weaknesses / missing elements**, and **(c) actionable recommendations**.
        Close with a concise **Revised Outline** (bullet list) showing how the LR should be organised after revision.
        Use a constructive tone and keep in mind that the professor is the final arbiter.

        <EvaluationDimensions>
            1. Research Question Alignment
            2. Structural Organization (thematic flow, headings, transitions)
            3. Content Focus (scope, “how” vs “what”, relevance)
            4. Analytical Depth (synthesis, critique, identification of gaps)
            5. Case Separation (absence of RQ case material; general frameworks only)
        </EvaluationDimensions>

        <OutputFormat>
            1. Reformulated RQ (if clarity is needed)
            2. Dimension-by-Dimension Feedback
            3. Revised Outline
            4. Reminder that feedback is advisory and professor decides
        </OutputFormat>

        <StyleGuidelines>
            • Use numbered or bulleted lists for clarity.
            • Be specific—quote or paraphrase student text to illustrate points.
            • Offer concrete fixes (e.g., “Move the history of rail privatisation to the Introduction”).
            • Avoid grading language; instead use “Consider…”, “You may want to…”.
            • Keep total length under ~500 words.
        </StyleGuidelines>

        <ResearchQuestion>
            ${q}
        </ResearchQuestion>

        <LiteratureReview>
            ${s}
        </LiteratureReview>
    </UserPrompt>
</PromptTemplate>`;
      }
      // ... other modes unchanged ...

      resultDiv.textContent = prompt;
      copyBtn.classList.remove('hidden');
    });

    copyBtn.addEventListener('click', () => {
      navigator.clipboard.writeText(resultDiv.textContent)
        .then(() => copyBtn.textContent = 'Copied!')
        .catch(() => copyBtn.textContent = 'Copy Failed');
    });
  </script>
</body>
</html>
